<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIZA ELITE | Cyber Matrix</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        :root {
            /* --- Cyber Matrix Palette (Ø£Ø³ÙˆØ¯ Ã— Ø£Ø®Ø¶Ø± Ã— Ø£Ø²Ø±Ù‚) --- */
            --bg: #000000;          /* Ø£Ø³ÙˆØ¯ Ø­Ø§Ù„Ùƒ */
            --card-bg: #0a0a0a;     /* Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚ Ø¬Ø¯Ø§Ù‹ Ù„Ù„ÙƒØ±ÙˆØª */
            
            --accent: #00ff41;      /* Ø£Ø®Ø¶Ø± Ù‡ÙƒØ± (Matrix Green) */
            --accent-glow: rgba(0, 255, 65, 0.2);
            
            --secondary: #00bfff;   /* Ø£Ø²Ø±Ù‚ Ø³Ù…Ø§ÙˆÙŠ Ù†ÙŠÙˆÙ† */
            
            --text: #e0e0e0;        /* Ø£Ø¨ÙŠØ¶ Ù…Ø·ÙÙŠ */
            --text-dim: #008F11;    /* Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ Ù„Ù„Ù†ØµÙˆØµ Ø§Ù„ÙØ±Ø¹ÙŠØ© */
            
            --border: #003b00;      /* Ø­Ø¯ÙˆØ¯ Ø®Ø¶Ø±Ø§Ø¡ ØºØ§Ù…Ù‚Ø© */
            --border-active: #00ff41; /* Ø­Ø¯ÙˆØ¯ Ù†Ø´Ø·Ø© */

            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ "ÙƒÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù†" */
            --success: #00ff41;
            --danger: #ff0055;
            --warning: #ffd700;
            --info: #00bfff;
        }

        * { box-sizing: border-box; font-family: 'Cairo', sans-serif; outline: none; transition: all 0.2s ease-in-out; }
        
        body { 
            background-color: var(--bg); 
            color: var(--text); 
            margin: 0; 
            min-height: 100vh;
            /* Ø®Ù„ÙÙŠØ© Ø±Ù‚Ù…ÙŠØ© (Digital Rain Effect Hint) */
            background-image: 
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px), 
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--accent); border-radius: 2px; }

        /* --- Login Screen --- */
        #login-screen { display: flex; justify-content: center; align-items: center; height: 100vh; }
        .login-box { 
            background: rgba(10, 10, 10, 0.9); 
            padding: 50px 40px; 
            border: 1px solid var(--accent); 
            box-shadow: 0 0 30px var(--accent-glow);
            width: 90%; max-width: 400px; 
            text-align: center; 
            border-radius: 10px;
        }

        input, select, textarea { 
            width: 100%; padding: 15px; margin: 10px 0; 
            background: #000; border: 1px solid #333; 
            color: var(--secondary); font-family: 'Fira Code', monospace; font-size: 1rem; 
            border-radius: 5px;
        }
        input:focus, select:focus, textarea:focus { 
            border-color: var(--accent); 
            box-shadow: 0 0 10px var(--accent-glow);
        }

        /* --- Buttons --- */
        .btn { 
            padding: 12px 25px; border: none; cursor: pointer; font-weight: bold; 
            text-transform: uppercase; letter-spacing: 1px; 
            display: inline-flex; align-items: center; justify-content: center; gap: 10px;
            border-radius: 5px;
            font-family: 'Fira Code', monospace;
        }
        .btn-primary { background: var(--accent); color: #000; box-shadow: 0 0 15px var(--accent-glow); }
        .btn-primary:hover { background: #fff; color: #000; }
        
        .btn-danger { background: rgba(255, 0, 85, 0.1); color: var(--danger); border: 1px solid var(--danger); }
        .btn-danger:hover { background: var(--danger); color: #fff; }

        .btn-success { background: rgba(0, 255, 65, 0.1); color: var(--success); border: 1px solid var(--success); }
        
        /* --- Layout --- */
        #admin-panel { display: none; padding: 20px; max-width: 1800px; margin: auto; }
        
        .header { 
            background: var(--card-bg); 
            padding: 20px 30px; 
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--accent); 
            border-radius: 15px;
            margin-bottom: 30px;
        }

        /* --- Charts --- */
        .charts-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .chart-card { background: var(--card-bg); padding: 20px; border: 1px solid #222; border-radius: 10px; height: 320px; }

        /* --- Stats Bar --- */
        .stats-bar { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-box { 
            background: #050505; 
            padding: 20px; border: 1px solid var(--secondary);
            text-align: center; border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.1);
        }
        .stat-num { font-size: 2.5rem; color: var(--secondary); font-weight: bold; font-family: 'Fira Code', monospace; }
        .stat-lbl { color: #888; font-size: 0.9rem; margin-top: 5px; }

        /* --- Table --- */
        .data-container { background: var(--card-bg); border: 1px solid #222; border-radius: 10px; overflow-x: auto; }
        table { width: 100%; border-collapse: separate; border-spacing: 0; min-width: 1100px; }
        
        th { 
            text-align: right; padding: 15px; 
            background: #000; color: var(--accent); 
            border-bottom: 1px solid var(--accent); 
            font-size: 0.9rem; font-weight: bold;
        }
        td { padding: 12px 15px; border-bottom: 1px solid #222; color: #ccc; }
        tr:hover td { background: rgba(0, 255, 65, 0.05); }

        /* --- Action Buttons (Colorful) --- */
        .act-btn { width: 34px; height: 34px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; color: #fff; margin-left: 5px; border-radius: 6px; font-size: 1rem; }
        .btn-c-code { background: #00bfff; } /* Blue */
        .btn-edt { background: #ff9f43; } /* Orange */
        .btn-del { background: #ff0055; } /* Red */
        .btn-dis { background: #576574; } /* Grey */
        .btn-eject { background: #9b59b6; } /* Purple */

        /* --- Tabs --- */
        .nav-tab { background: transparent; color: #666; padding: 10px 20px; border: none; cursor: pointer; font-size: 1.1rem; border-bottom: 3px solid transparent; }
        .nav-tab.active { color: var(--accent); border-bottom-color: var(--accent); font-weight: bold; text-shadow: 0 0 10px var(--accent-glow); }
        
        .nav-btn { background: #000; border: 1px solid #444; color: #888; padding: 6px 18px; cursor: pointer; border-radius: 20px; }
        .nav-btn.active { border-color: var(--secondary); color: var(--bg); background: var(--secondary); font-weight: bold; }

        /* --- Team Cards (Updated) --- */
        .admin-card { 
            background: var(--card-bg); 
            border: 1px solid #333; 
            border-radius: 12px; 
            padding: 30px; 
            text-align: center; 
            position: relative;
            overflow: hidden;
            transition: 0.3s;
        }
        .admin-card:hover { border-color: var(--accent); box-shadow: 0 0 20px var(--accent-glow); transform: translateY(-5px); }
        .admin-card h3 { color: var(--accent); margin: 10px 0; }
        .admin-role { color: var(--secondary); font-family: 'Fira Code'; font-size: 0.8rem; letter-spacing: 2px; }
        .admin-stat-count { 
            margin-top: 15px; 
            background: rgba(0,0,0,0.5); 
            padding: 10px; 
            border-radius: 8px; 
            border: 1px dashed var(--secondary);
            color: #fff;
        }

        /* --- Modals --- */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 9999; justify-content: center; align-items: center; }
        .modal-content { background: #111; padding: 35px; width: 95%; max-width: 500px; border: 1px solid var(--accent); border-radius: 10px; box-shadow: 0 0 50px rgba(0,255,65,0.1); }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-box">
            <i class="fas fa-microchip fa-4x" style="color: var(--accent); margin-bottom: 20px;"></i>
            <h2 style="color: #fff; margin: 0 0 10px; letter-spacing: 2px; font-family:'Fira Code'">SYSTEM ACCESS</h2>
            <p style="color: var(--secondary); font-size: 0.9rem;">SECURE CONNECTION</p>
            <input type="email" id="email" placeholder="ADMIN ID">
            <input type="password" id="password" placeholder="PIN CODE">
            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="handleLogin()">
                Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³ÙŠØ³ØªÙ… ğŸš€
            </button>
        </div>
    </div>

    <div id="admin-panel">
        <div class="header">
            <div>
                <h3 id="welcome-msg" style="margin:0; color: #fff; font-family:'Fira Code'">ONLINE</h3>
                <div id="role-label" style="color: var(--secondary); opacity: 0.9; margin-top: 5px; font-weight:bold;"></div>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success" onclick="openCreateModal('normal')"><i class="fas fa-plus"></i> ÙƒÙˆØ¯ Ø¬Ø¯ÙŠØ¯</button>
                <button class="btn btn-danger" onclick="logout()"><i class="fas fa-power-off"></i></button>
            </div>
        </div>

        <div style="margin-bottom: 20px; border-bottom: 1px solid #333; display: flex; gap: 15px;">
            <button class="nav-tab active" onclick="switchMainTab('dashboard')"><i class="fas fa-tachometer-alt"></i> Ø§Ù„ØªØ­ÙƒÙ…</button>
            <button class="nav-tab" onclick="switchMainTab('tickets')"><i class="fas fa-envelope-open-text"></i> Ø§Ù„Ø±Ø³Ø§ÙŠÙ„</button>
            <button class="nav-tab" onclick="switchMainTab('team')"><i class="fas fa-users-cog"></i> Ø§Ù„ÙØ±ÙŠÙ‚ & Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
        </div>

        <div id="dashboard-view">
            <div class="charts-container" id="charts-area">
                <div class="chart-card"><canvas id="usersChart"></canvas></div>
                <div class="chart-card"><canvas id="financeChart"></canvas></div>
            </div>

            <div id="stats-area" class="stats-bar" style="display: none;"></div>

            <div class="sub-nav">
                <button class="nav-btn active" onclick="setView('active', this)">Ù†Ø´Ø· (Active)</button>
                <button class="nav-btn" onclick="setView('trial', this)">ØªØ¬Ø±ÙŠØ¨ÙŠ (Trial)</button>
                <button class="nav-btn" onclick="setView('disabled', this)">Ù…Ø¹Ø·Ù„ (Disabled)</button>
                <button class="nav-btn" onclick="setView('expired', this)">Ù…Ù†ØªÙ‡ÙŠ (Expired)</button>
                <button class="nav-btn" onclick="setView('banned', this)">Ù…Ø­Ø¸ÙˆØ± (Banned)</button>
            </div>
            
            <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯..." style="width:100%; padding: 15px; margin-bottom: 20px;">
            
            <div class="data-container">
                <table id="main-table">
                    <thead id="table-head"></thead>
                    <tbody id="table-body"></tbody>
                </table>
            </div>
        </div>

        <div id="tickets-view" style="display:none;">
            <div id="tickets-container" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;"></div>
        </div>

        <div id="team-view" style="display:none; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;"></div>
    </div>

    <div id="actionModal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title" style="color: var(--accent); margin-top:0;">DATA ENTRY</h2>
            <input type="hidden" id="edit-mode-id">
            <input type="text" id="m-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø«Ù„Ø§Ø«ÙŠ">
            <select id="m-section"><option value="Ø¹Ø§Ù…">Ø¹Ø§Ù…</option><option value="Ø£Ø¯Ø¨ÙŠ">Ø£Ø¯Ø¨ÙŠ</option><option value="Ø¹Ù„Ù…ÙŠ">Ø¹Ù„Ù…ÙŠ</option></select>
            <input type="number" id="m-price" value="0">
            <div id="duration-section">
                <select id="m-duration" onchange="toggleCustomDays(this.value)">
                    <option value="month">Ø´Ù‡Ø±</option>
                    <option value="trial">ØªØ¬Ø±Ø¨Ø©</option>
                    <option value="custom">Ù…Ø®ØµØµ</option>
                </select>
                <input type="number" id="m-days" style="display:none;" placeholder="Days">
            </div>
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="btn btn-primary" style="flex:2" onclick="submitSave()">Ø­ÙØ¸</button>
                <button class="btn btn-danger" style="flex:1" onclick="closeModal()">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>
    
    <div id="successModal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <h2 style="color: var(--accent);">DONE</h2>
            <div id="generated-code" style="background:#000; color:var(--accent); padding:20px; font-size:2rem; font-family:'Fira Code'; margin:20px 0; border:1px dashed var(--accent)"></div>
            <button class="btn btn-primary" onclick="copyAndClose()">Copy & Close</button>
        </div>
    </div>

    <script>
        // ... (All previous Firebase Config & Admin Map) ...
        const ADMIN_MAP = {
            "0zb8DE5GgeYobn0wMzaXiDAPbiO2": { name: "giza", label: "Eng. Giza (Owner)", role: "owner" },
            "YFYNXb6sBEPkwfikuYBBVe6ggZN2": { name: "sara", label: "Eng. Sara (Manager)", role: "manager" },
            "Zh16pJVYpwZet02RGbRPgdwFfoE2": { name: "mahmoud", label: "Eng. Mahmoud (Staff)", role: "staff" },
            "5cY88LU42yfwjlOng4ik6aADm863": { name: "ahmed", label: "Eng. Ahmed (Staff)", role: "staff" }
        };

        const SERVER_URL = "https://admey.vercel.app/api/admin"; 
        let currentUser = null;
        let dbData = { codes: [], blocked_devices: {}, expenses: {} };
        let currentView = 'active'; 
        let currentScope = 'all';
        let charts = {}; 

        // Firebase Config (Keep your existing keys)
        const firebaseConfigMain = { apiKey: "AIzaSyD7PB4meIc-r2ijKzheD7P868CfKdsVej0", databaseURL: "https://full-mark1-default-rtdb.firebaseio.com" };
        const mainApp = firebase.initializeApp(firebaseConfigMain); 
        const mainAuth = mainApp.auth();

        // Auth Logic
        async function handleLogin() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            try {
                const res = await mainAuth.signInWithEmailAndPassword(email, pass);
                if (!ADMIN_MAP[res.user.uid]) { alert("Access Denied"); mainAuth.signOut(); }
            } catch (e) { alert("Error"); }
        }

        mainAuth.onAuthStateChanged(user => {
            if (user && ADMIN_MAP[user.uid]) {
                currentUser = { ...ADMIN_MAP[user.uid], uid: user.uid };
                initDashboard();
            } else {
                document.getElementById('login-screen').style.display = 'flex';
                document.getElementById('admin-panel').style.display = 'none';
            }
        });

        function logout() { mainAuth.signOut(); }

        function initDashboard() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'block';
            document.getElementById('welcome-msg').innerText = `WELCOME, ${currentUser.name.toUpperCase()}`;
            document.getElementById('role-label').innerText = currentUser.label;
            if (currentUser.role === 'owner') {
                document.getElementById('stats-area').style.display = 'grid';
                document.getElementById('charts-area').style.display = 'grid';
            } else {
                currentScope = currentUser.name;
                document.getElementById('charts-area').style.display = 'none';
            }
            refreshData();
        }

        async function refreshData() {
            try {
                const res = await fetch(`${SERVER_URL}/dashboard-data?admin_uuid=${currentUser.uid}&target_admin=${currentScope}`);
                dbData = await res.json();
                renderTable();
                if (currentUser.role === 'owner') { updateStats(); initCharts(); }
            } catch (e) { console.error(e); }
        }

        // --- HERE IS THE UPDATED LOGIC FOR TEAM VIEW ---
        function switchMainTab(tab) {
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            ['dashboard-view', 'tickets-view', 'team-view'].forEach(id => document.getElementById(id).style.display = 'none');
            
            if(tab === 'dashboard') document.getElementById('dashboard-view').style.display = 'block';
            if(tab === 'tickets') document.getElementById('tickets-view').style.display = 'block';
            
            // --- TEAM VIEW: CALCULATE STATS ---
            if(tab === 'team') {
                document.getElementById('team-view').style.display = 'grid';
                
                const teamHTML = Object.values(ADMIN_MAP).map(admin => {
                    // 1. Calculate stats for each admin
                    const adminCodes = dbData.codes.filter(c => c.addedByAdmin === admin.name);
                    const count = adminCodes.length;
                    const revenue = adminCodes.reduce((sum, c) => sum + (parseFloat(c.pricePaid) || 0), 0);

                    // 2. Render Card
                    return `
                    <div class="admin-card">
                        <i class="fas fa-user-astronaut fa-4x" style="color:var(--accent); margin-bottom:15px; text-shadow:0 0 15px var(--accent-glow)"></i>
                        <h3>${admin.label}</h3>
                        <div class="admin-role">${admin.role.toUpperCase()}</div>
                        
                        <div class="admin-stat-count">
                            <div style="font-size:1.5rem; font-weight:bold; color:#fff">${count}</div>
                            <div style="font-size:0.8rem; opacity:0.7">CODES GENERATED</div>
                        </div>
                        
                        ${currentUser.role === 'owner' ? `
                        <div style="margin-top:10px; color:var(--success); font-family:'Fira Code'">
                            <i class="fas fa-money-bill-wave"></i> ${revenue} EGP
                        </div>` : ''}
                    </div>`;
                }).join('');
                
                document.getElementById('team-view').innerHTML = teamHTML;
            }
        }

        // --- Render Table (Updated for new Colors) ---
        function renderTable() {
            const head = document.getElementById('table-head');
            const body = document.getElementById('table-body');
            body.innerHTML = '';

            if (currentView === 'banned') { renderBannedView(); return; }
            
            head.innerHTML = `<tr>
                <th>CODE</th> <th>ENGINEER</th> <th>DEVICE ID</th> <th>BY ADMIN</th> <th>DURATION</th> <th>PRICE</th> <th>ACTIONS</th>
            </tr>`;

            let list = currentView === 'trial' ? dbData.codes.filter(c => c.isTrial) : dbData.codes.filter(c => c.state === currentView);
            if (currentUser.role !== 'owner') list = list.filter(c => c.addedByAdmin === currentUser.name);

            list.forEach(item => {
                const badge = item.isTrial ? '<span style="color:var(--warning); border:1px solid var(--warning); padding:0 3px; font-size:10px;">TRIAL</span>' : '';
                const deviceDisplay = item.deviceId 
                    ? `<span style="font-family:'Fira Code'; color:var(--secondary); font-size:0.85rem;">${item.deviceId}</span>` 
                    : `<span style="color:#444; font-size:0.8rem;">-- PENDING --</span>`;

                const row = `
                    <tr>
                        <td style="font-family:'Fira Code'; color:var(--accent); font-weight:bold;">${item.code}</td>
                        <td>${badge} <b style="color:#fff">${item.name}</b> <br> <small style="color:var(--secondary)">${item.section}</small></td>
                        <td>${deviceDisplay}</td>
                        <td style="color:#aaa">${item.addedByAdmin}</td>
                        <td>${formatDuration(item)}</td>
                        <td style="color:var(--success); font-family:'Fira Code'">${item.pricePaid}</td>
                        <td style="display:flex;">
                            <button class="act-btn btn-c-code" title="Copy" onclick="copyText('${item.code}')"><i class="fas fa-copy"></i></button>
                            <button class="act-btn btn-eject" title="Eject" onclick="quickAction('${item.code}', 'eject_device')"><i class="fas fa-sign-out-alt"></i></button>
                            <button class="act-btn btn-dis" title="Disable" onclick="quickAction('${item.code}', 'toggle_block')"><i class="fas fa-power-off"></i></button>
                            <button class="act-btn btn-del" title="Delete" onclick="quickAction('${item.code}', 'delete')"><i class="fas fa-trash"></i></button>
                            <button class="act-btn btn-edt" title="Edit" onclick="openEditModal('${item.code}')"><i class="fas fa-edit"></i></button>
                        </td>
                    </tr>`;
                body.insertAdjacentHTML('beforeend', row);
            });
        }
        
        // (Include all other helper functions: formatDuration, quickAction, submitSave, etc. from previous code)
        function formatDuration(item) {
             // ... (Keep existing)
             return `<span style="color:#ccc">${Math.ceil((item.expiry - Date.now())/86400000)} DAYS</span>`;
        }
        function copyText(t) { navigator.clipboard.writeText(t); }
        function openEditModal(c) { 
            document.getElementById('edit-mode-id').value = c; 
            document.getElementById('actionModal').style.display='flex'; 
        }
        function openCreateModal() { 
            document.getElementById('edit-mode-id').value = ""; 
            document.getElementById('actionModal').style.display='flex'; 
        }
        function closeModal() { document.querySelectorAll('.modal').forEach(m => m.style.display='none'); }
        async function submitSave() { /* ... use previous submitSave code ... */ }
        async function quickAction(c,a) { await fetch(`${SERVER_URL}/take-action`, {method:'POST', body:JSON.stringify({code:c, action:a, admin_uuid:currentUser.uid})}); refreshData(); }
        function filterTable() { /* ... */ }
        function toggleCustomDays(v) { document.getElementById('m-days').style.display = v === 'custom' ? 'block' : 'none'; }
        function setView(v, b) { currentView = v; document.querySelectorAll('.sub-nav .nav-btn').forEach(btn => btn.classList.remove('active')); b.classList.add('active'); renderTable(); }
        function updateStats() { /* ... */ }
        function initCharts() { /* ... use previous charts config but update colors ... */ }
    </script>
</body>
</html>
